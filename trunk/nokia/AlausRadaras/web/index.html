<!DOCTYPE html> 
<html> 
<head> 
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" /> 
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/> 
<style type="text/css"> 
  html { height: 100% }
  body { height: 100%; margin: 0px; padding: 0px }
  #map_canvas { height: 100% }
</style> 
<title>Google Maps JavaScript API v3 Example: Map Simple</title> 
<script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3.1&sensor=false"></script> 
<script type="text/javascript" src="qrc:///web/json2.js">
</script> 
<script type="text/javascript"> 
  var map;
  function initialize() {
    var myLatlng = new google.maps.LatLng(54.6896, 25.2799);
    var myOptions = {
      zoom: 16,
      center: myLatlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
     map = new google.maps.Map(document.getElementById("map_canvas"), myOptions); 
	 
		var image = 'pin.png';
	 var pubs = JSON.parse(BeerMap.getMarkerData());
	 
	 for (var i = 0; i < pubs.length; i++) {
		var pubPosition = new google.maps.LatLng(pubs[i].lat, pubs[i].lng);
		var marker = new google.maps.Marker({
				  position: pubPosition,
				  title:pubs[i].name,
				  icon: image
		});
  
		marker.setMap(map);  
	
		listenMarker(marker, map, pubs[i]);

	 }
	 
  }
  
  function listenMarker (marker, map, pub) {
	google.maps.event.addListener(marker, 'click', function() {
			showToolTip(marker,map,pub);
		});
}
  
  function showToolTip(marker, map, pub) {
	var infowindow = new google.maps.InfoWindow({
				content: '<div onclick="javascript:BeerMap.showPub(\''+ pub.id +'\');">' + pub.name + '</div>'
			});
	infowindow.open(map,marker);
  }
</script> 
</head> 
<body onload="initialize()"> 
  <div id="map_canvas"></div> 
</body> 
</html> 